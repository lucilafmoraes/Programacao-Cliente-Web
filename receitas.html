<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Receitas AJAX</title>
</head>
<body>
    <h1>Receitas</h1>
    <div id="receitas"></div>
</body>
<script>
const carregaLista = lista =>  lista.reduce((acum, item) =>acum +`<li>${item}</li>`, "")

const carregarReceita = preparacao => {
    let resp = `<div class="receita">
        <h1>${preparacao.nome}</h1>
        <img src="${preparacao.foto}" alt="${preparacao.nome}">
        <h3>Preparo</h3>
        <ol>${carregaLista(preparacao.preparo)}</ol>
        <h3>Ingredientes</h3>
        <ul>${carregaLista(preparacao.ingredientes)}</ul>
        </div>`
    const divResp = document.querySelector("#receitas")
    divResp.innerHTML += resp
}

    const xhttp = new XMLHttpRequest()
    const url = "https://rafaelescalfoni.github.io/desenv_web/receitas.json"
    
    xhttp.open("get", url)
    xhttp.send()
    xhttp.onreadystatechange = function() {
        if(this.readyState == 4) {
            if(this.status == 200) {
                //baixar receitas
                let resposta = this.responseText
                let receitas = JSON.parse(resposta)
                //iterar o array 
                receitas.forEach(receita => {
                    //carregar as receitas
                    carregarReceita(receita)
                });
            } else {
                //deu bigode! :#(
            }
        } 
    }
</script>
</html>



